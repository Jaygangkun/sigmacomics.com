"use strict";(self.webpackChunkshopwp=self.webpackChunkshopwp||[]).push([["AdminSettingSyncingByCollections-admin"],{DlMW:function(n,t,e){e.r(t),e.d(t,{default:function(){return L}});var i=e("/0+J"),s=e("oYSA"),o=e("o0o1"),a=e.n(o),l=e("xblO"),r=e("ALIA"),c=e("k4Da"),u=e.n(c),p=e("Ancs"),y=e("Qjib"),f=e("X6Ea"),d=e("OFL0"),h=e.n(d),m=e("Z0cm"),C=e.n(m),b=e("DTvD"),S=e("FxId"),_=e("PgSa"),w={name:"1sgh0nt-styles",styles:"margin:60px 0!important;display:flex;.components-spinner{margin-top:0;};label:styles;"},L=function(){var n,t=wp.element,e=t.useContext,o=t.useState,c=t.useEffect,d=wp.components,m=d.Spinner,L=d.Notice,Z=d.Button,g=(()=>{const n=(0,b.useRef)(!1);return(0,b.useEffect)((()=>(n.current=!0,()=>n.current=!1)),[]),n})(),v=e(r.Z),E=(0,s.Z)(v,2),k=E[0],O=E[1],T=e(p.Z),A=(0,s.Z)(T,2),I=A[0],x=A[1],D=o(k.syncByCollections?k.syncByCollections.map((function(n){return n.id})):[]),N=(0,s.Z)(D,2),B=N[0],P=N[1],G=o(!1),F=(0,s.Z)(G,2),M=F[0],U=F[1],V=w;function W(n){return n&&C()(n)?n.map((function(n){return{id:n.id,title:n.title,handle:n.handle,smart:!!h()(n,"rules")}})):[]}return c((function(){function n(){return(n=(0,i.Z)(a().mark((function n(){var t,e,i,o;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return x({type:"SET_IS_LOADING_COLLECTIONS",payload:!0}),n.next=3,(0,S.Z)((0,_.Lg)());case 3:if(t=n.sent,e=(0,s.Z)(t,2),i=e[0],o=e[1],x({type:"SET_IS_LOADING_COLLECTIONS",payload:!1}),g.current){n.next=10;break}return n.abrupt("return");case 10:if(!(0,_.nq)(o)){n.next=13;break}return U((0,_.OM)(o)),n.abrupt("return");case 13:if(!i){n.next=16;break}return U(i),n.abrupt("return");case 16:h()(o,"data")&&(o=o.data),x({type:"SET_AVAILABLE_COLLECTIONS",payload:W(o)}),(o?o.filter((function(n){return B.includes(n.id)})):[]).length||(P([]),O({type:"UPDATE_SETTING",payload:{key:"syncByCollections",value:[]}}));case 20:case"end":return n.stop()}}),n)})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[]),I.hasConnection?I.availableCollections?(0,l.tZ)(y.P,{label:wp.i18n.__("Only sync from these collections:","shopwp"),settingsKey:"syncByCollections",options:(n=I.availableCollections,n?n.map((function(n){return{label:n.title,value:n.id}})):[]),disableWhen:[k.isLiteSync],customValue:B,customOnChange:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];P(n),O({type:"UPDATE_SETTING",payload:{key:"syncByCollections",value:u()(I.availableCollections,(function(t){if(n)return n.includes(t.id.toString())}))}})},multiple:!0}):M?(0,l.tZ)(L,{status:"error",isDismissible:!1},M):(0,l.tZ)("div",{css:V},wp.i18n.__("Loading Collections ... ","shopwp")," ",(0,l.tZ)(m,null)):(0,l.tZ)(L,{status:"warning",isDismissible:!1},wp.i18n.__("No Shopify connection found! Please connect your store from ","shopwp"),(0,l.tZ)(Z,{isLink:!0,onClick:function(n){(0,f.md)("connect")}},wp.i18n.__("inside the Connect tab.","shopwp")))}}}]);