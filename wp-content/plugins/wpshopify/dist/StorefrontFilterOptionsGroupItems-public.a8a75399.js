"use strict";(self.webpackChunkshopwp=self.webpackChunkshopwp||[]).push([["StorefrontFilterOptionsGroupItems-public"],{J3Ek:function(e,t,n){n.r(t);var r=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function i(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!((i=e[n])===(a=t[n])||r(i)&&r(a)))return!1;var i,a;return!0}t.default=function(e,t){var n;void 0===t&&(t=i);var r,a=[],s=!1;return function(){for(var i=[],c=0;c<arguments.length;c++)i[c]=arguments[c];return s&&n===this&&t(i,a)||(r=e.apply(this,i),s=!0,n=this,a=i),r}}},XyPT:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var r=n("raWh"),i=n("XUG9"),a=n("J3Ek"),s=n("KKeo"),c=n.n(s),o=n("UTgq"),u=n.n(o),l=n("FSEy"),f=function(e){var t=e.itemValue,n=e.itemType,r=e.storefrontDispatch,a=e.isLoading,s=e.initialSelections,o=wp.element,f=o.useState,v=o.useEffect,d=f((function(){var e=s[n];if("collections"!==n)return!!(e&&e.length&&t)&&e.includes(String(t).toLowerCase())})),p=(0,i.Z)(d,2),h=p[0],m=p[1],g="collections"===n?t.label:t,b=(0,l.f)();return v((function(){if(c()(b.selections)&&m(!1),c()(b.selections[n])&&m(!1),"collections"===n)var e=u()(b.selections[n],t);else e=b.selections[n]&&t&&b.selections[n].length?b.selections[n].includes(String(t).toLowerCase()):h;e||m(!1)}),[b.selections]),React.createElement("li",{"data-wps-is-selected":h,"data-wps-filter-value":g,"data-wps-display-style":"checkbox",className:"wps-checkbox-wrapper"},React.createElement("label",{className:"wps-input-label"},React.createElement("input",{type:"checkbox",onChange:function(){if(!a){var e={itemValue:t,itemType:n,isSelected:!h};m(!h),r({type:"SET_LAST_SELECTED",payload:e})}},disabled:a,checked:h?"checked":"",className:"wps-input-value"}),g&&React.createElement("span",null,g)))},v=n("jdSA"),d=n("DTvD");function p(){return p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}var h,m=["bottom","height","left","right","top","width"],g=new Map,b=function e(){var t=[];g.forEach((function(e,n){var r,i,a=n.getBoundingClientRect();r=a,i=e.rect,void 0===r&&(r={}),void 0===i&&(i={}),m.some((function(e){return r[e]!==i[e]}))&&(e.rect=a,t.push(e))})),t.forEach((function(e){e.callbacks.forEach((function(t){return t(e.rect)}))})),h=window.requestAnimationFrame(e)},w="undefined"!=typeof window?d.useLayoutEffect:d.useEffect;function y(e,t){void 0===t&&(t={width:0,height:0});var n=d.useState(e.current),r=n[0],i=n[1],a=d.useReducer(S,t),s=a[0],c=a[1],o=d.useRef(!1);return w((function(){e.current!==r&&i(e.current)})),w((function(){if(r&&!o.current){o.current=!0;var e=r.getBoundingClientRect();c({rect:e})}}),[r]),d.useEffect((function(){if(r){var e,t,n=(e=r,t=function(e){c({rect:e})},{observe:function(){var n=0===g.size;g.has(e)?g.get(e).callbacks.push(t):g.set(e,{rect:void 0,hasRectChanged:!1,callbacks:[t]}),n&&b()},unobserve:function(){var n=g.get(e);if(n){var r=n.callbacks.indexOf(t);r>=0&&n.callbacks.splice(r,1),n.callbacks.length||g.delete(e),g.size||cancelAnimationFrame(h)}}});return n.observe(),function(){n.unobserve()}}}),[r]),s}function S(e,t){var n=t.rect;return e.height!==n.height||e.width!==n.width?n:e}var k=function(){return 50},E=function(e){return e},R=function(e,t){return e[t?"offsetWidth":"offsetHeight"]},z=function(e){for(var t=Math.max(e.start-e.overscan,0),n=Math.min(e.end+e.overscan,e.size-1),r=[],i=t;i<=n;i++)r.push(i);return r};var x=wp.element.memo((function(e){var t=e.data,n=e.index,r=e.size,i=e.start,a=t.filterOptions,s=t.itemType,c=t.storefrontDispatch,o=t.isLoading,u=t.initialSelections,l=a[n];return React.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"".concat(r,"px"),transform:"translateY(".concat(i,"px)")}},React.createElement(f,{itemType:s,itemValue:l,storefrontDispatch:c,isLoading:o,initialSelections:u}))})),O=(0,a.default)((function(e,t,n,r,i){return{filterOptions:e,itemType:t,storefrontDispatch:n,isLoading:r,initialSelections:i}})),C=function(e){var t,n=e.filterOptions,a=e.itemType,s=(0,l.D)(),c=(0,l.f)(),o=(0,wp.element.useState)(c.selections),u=(0,i.Z)(o,1)[0],f=(0,v.Q)(),h=O(n,a,s,f.isLoading,u),m=React.useRef(),g=function(e){var t,n=e.size,r=void 0===n?0:n,i=e.estimateSize,a=void 0===i?k:i,s=e.overscan,c=void 0===s?1:s,o=e.paddingStart,u=void 0===o?0:o,l=e.paddingEnd,f=void 0===l?0:l,v=e.parentRef,h=e.horizontal,m=e.scrollToFn,g=e.useObserver,b=e.initialRect,S=e.onScrollElement,x=e.scrollOffsetFn,O=e.keyExtractor,C=void 0===O?E:O,T=e.measureSize,L=void 0===T?R:T,M=e.rangeExtractor,N=void 0===M?z:M,D=h?"width":"height",F=h?"scrollLeft":"scrollTop",A=d.useRef({scrollOffset:0,measurements:[]}),I=d.useState(0),j=I[0],Z=I[1];A.current.scrollOffset=j;var q=(g||y)(v,b)[D];A.current.outerSize=q;var V=d.useCallback((function(e){v.current&&(v.current[F]=e)}),[v,F]),B=m||V;m=d.useCallback((function(e){B(e,V)}),[V,B]);var G=d.useState({}),J=G[0],K=G[1],P=d.useCallback((function(){return K({})}),[]),U=d.useRef([]),W=d.useMemo((function(){var e=U.current.length>0?Math.min.apply(Math,U.current):0;U.current=[];for(var t=A.current.measurements.slice(0,e),n=e;n<r;n++){var i=C(n),s=J[i],c=t[n-1]?t[n-1].end:u,o="number"==typeof s?s:a(n),l=c+o;t[n]={index:n,start:c,size:o,end:l,key:i}}return t}),[a,J,u,r,C]),X=((null==(t=W[r-1])?void 0:t.end)||u)+f;A.current.measurements=W,A.current.totalSize=X;var _=S?S.current:v.current,H=d.useRef(x);H.current=x,w((function(){if(_){var e=function(e){var t=H.current?H.current(e):_[F];Z(t)};return e(),_.addEventListener("scroll",e,{capture:!1,passive:!0}),function(){_.removeEventListener("scroll",e)}}Z(0)}),[_,F]);var Q=function(e){for(var t=e.measurements,n=e.outerSize,r=e.scrollOffset,i=t.length-1,a=function(e,n,r,i){for(;e<=n;){var a=(e+n)/2|0,s=t[a].start;if(s<i)e=a+1;else{if(!(s>i))return a;n=a-1}}return e>0?e-1:0}(0,i,0,r),s=a;s<i&&t[s].end<r+n;)s++;return{start:a,end:s}}(A.current),Y=Q.start,$=Q.end,ee=d.useMemo((function(){return N({start:Y,end:$,overscan:c,size:W.length})}),[Y,$,c,W.length,N]),te=d.useRef(L);te.current=L;var ne=d.useMemo((function(){for(var e=[],t=function(t,n){var r=ee[t],i=p(p({},W[r]),{},{measureRef:function(e){if(e){var t=te.current(e,h);if(t!==i.size){var n=A.current.scrollOffset;i.start<n&&V(n+(t-i.size)),U.current.push(r),K((function(e){var n;return p(p({},e),{},((n={})[i.key]=t,n))}))}}}});e.push(i)},n=0,r=ee.length;n<r;n++)t(n);return e}),[ee,V,h,W]),re=d.useRef(!1);w((function(){re.current&&K({}),re.current=!0}),[a]);var ie=d.useCallback((function(e,t){var n=(void 0===t?{}:t).align,r=void 0===n?"start":n,i=A.current,a=i.scrollOffset,s=i.outerSize;"auto"===r&&(r=e<=a?"start":e>=a+s?"end":"start"),"start"===r?m(e):"end"===r?m(e-s):"center"===r&&m(e-s/2)}),[m]),ae=d.useCallback((function(e,t){var n=void 0===t?{}:t,i=n.align,a=void 0===i?"auto":i,s=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(n,["align"]),c=A.current,o=c.measurements,u=c.scrollOffset,l=c.outerSize,f=o[Math.max(0,Math.min(e,r-1))];if(f){if("auto"===a)if(f.end>=u+l)a="end";else{if(!(f.start<=u))return;a="start"}var v="center"===a?f.start+f.size/2:"end"===a?f.end:f.start;ie(v,p({align:a},s))}}),[ie,r]),se=d.useCallback((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];ae.apply(void 0,t),requestAnimationFrame((function(){ae.apply(void 0,t)}))}),[ae]);return{virtualItems:ne,totalSize:X,scrollToOffset:ie,scrollToIndex:se,measure:P}}({size:n.length,parentRef:m,estimateSize:React.useCallback((function(){return 30}),[])});return React.createElement("ul",(t={className:"wps-"+a,ref:m},(0,r.Z)(t,"className","List"),(0,r.Z)(t,"style",{height:"250px",width:"300px",overflow:"auto"}),t),React.createElement("div",{className:"ListInner",style:{height:"".concat(g.totalSize,"px"),width:"100%",position:"relative"}},g.virtualItems.map((function(e){return React.createElement(x,{key:e.index+e.end,data:h,index:e.index,size:e.size,start:e.start})}))))}}}]);