"use strict";(self.webpackChunkshopwp=self.webpackChunkshopwp||[]).push([["shopwp-components_components_products_product_buy-button_index_jsx"],{xDxd:function(t,e,n){n.d(e,{F:function(){return a},z:function(){return o}});var a=wp.element.createContext(),o=wp.element.createContext()},uX1n:function(t,e,n){n.d(e,{C:function(){return o},r:function(){return i}});var a=n("xDxd");function o(){var t=wp.element.useContext(a.F);if(!t)throw new Error("useProductBuyButtonState must be used within the ProductBuyButtonProvider");return t}function i(){var t=wp.element.useContext(a.z);if(!t)throw new Error("useProductBuyButtonDispatch must be used within the ProductBuyButtonProvider");return t}},JZLB:function(t,e,n){n.r(e),n.d(e,{default:function(){return zt}});var a,o=n("XTMG"),i=n("5BtH"),r=n.n(i),l=n("udXY"),s=n("MwdL"),p=n("EUQV"),c={name:"3hov7r-BuyButtonSkeletonRowCSS",styles:"display:flex;justify-content:space-between;label:BuyButtonSkeletonRowCSS;"},d={name:"1xoy23o-BuyButtonSkeletonCSS",styles:"display:flex;flex-direction:column;max-width:300px;label:BuyButtonSkeletonCSS;"},u=function(){var t=(0,o.F4)(a||(a=(0,p.Z)(["\n      0% {\n        opacity: 0.5;\n      }\n  \n      100% {\n        opacity: 1;\n      }\n    "]))),e=d,n=(0,o.iv)("height:40px;border-radius:15px;animation:",t," 0.4s ease-out 0s alternate infinite none running;background:#eee;margin-top:15px;;label:buyButtonCtaCSS;"),i=c,r=(0,o.iv)("margin:0;border-radius:15px;width:30%;max-width:30%;flex:0 0 30%;height:20px;border-radius:15px;animation:",t," 0.4s ease-out 0s alternate infinite none running;background:#eee;;label:VariantCSS;");return(0,o.tZ)("div",{css:e},(0,o.tZ)("div",{css:i},(0,o.tZ)("div",{css:r}),(0,o.tZ)("div",{css:r}),(0,o.tZ)("div",{css:r})),(0,o.tZ)("div",{css:n}))},y=n("o+TG"),S=n("DkC4"),v=n.n(S),b=n("C7S+"),f=n.n(b),T=n("EBgg"),m=n.n(T),O=n("Dgau"),E=n.n(O),h=n("CUeZ"),g=n.n(h);function C(t){return m()(t,"value").filter((function(t){return t.value}))}n("/WdH");var w=n("GYXz"),x=n("XUG9"),_=n("ILDY"),k=n.n(_),B=n("f8o8"),P=n("E5I5"),D=n("81/l"),I=n("uX1n"),L=n("PgSa"),Z=wp.element.lazy((function(){return Promise.resolve().then(n.bind(n,"20Ni"))})),N=wp.element.lazy((function(){return n.e("Link-public").then(n.bind(n,"tdT1"))})),A=wp.element.lazy((function(){return Promise.resolve().then(n.bind(n,"2SHZ"))})),V=wp.element.lazy((function(){return n.e("ProductBuyButtonLeftInStock-public").then(n.bind(n,"iEbB"))})),R=wp.element,j=R.useRef,F=R.useEffect,z=R.useState;function M(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{minQuantity:!1,maxQuantity:!1,subscription:!1,attributes:!1},a=(0,L.lJ)("wps-last-checkout-id");return{checkoutId:a,lineItems:t,variants:e,lineItemOptions:n}}function U(t,e){return[{variantId:t.node.id,quantity:e}]}function W(t,e,n){var a,o,i=(0,L.ew)();if(i)var r=(a=i.lineItems,o=n.id,a.filter((function(t){return t.variantId===o})));else r=!1;return!(!r||r.length<=0)&&r[0].quantity>=e}function G(t){var e=t.hasLink,n=t.payload,a=t.children,i=t.linkTo,r=t.linkTarget,l=t.isDirectCheckout,s=t.linkWithBuyButton;return!e||l||s?a:(0,o.tZ)(N,{type:"products",payload:n,linkTo:i,target:r},a)}var Q={name:"jql0qu-NoticeCSS",styles:"margin-top:15px;label:NoticeCSS;"};function q(t){var e=t.addToCartButtonColor,n=t.addToCartButtonTextColor,a=t.hasLink,i=t.linkWithBuyButton,r=t.isDirectCheckout,l=t.productDispatch,s=t.hasManyVariants,p=t.loader,c=t.buttonText,d=t.addedToCart,u=t.allOptionsSelected,y=t.quantity,S=t.selectedOptions,v=t.payload,b=t.payloadSettings,f=t.linkTo,T=z(!1),m=(0,x.Z)(T,2),O=m[0],E=m[1],h=z(!1),g=(0,x.Z)(h,2),C=g[0],_=g[1],L=z(!1),N=(0,x.Z)(L,2),A=N[0],V=N[1],R=(0,B.Th)(B.dC),G=j(),q=(0,I.C)(),X=b.maxQuantity,K=s?(0,P.oJ)(v,S):function(t){return!!t.variants.edges.length&&t.variants.edges[0]}(v);F((function(){u?K&&K.node.availableForSale?(E(!1),V(!1),R(G.current)):(E(!0),V({type:"warning",message:b.outOfStockNoticeText})):(E(!1),V(!1))}),[S,u]);var $=Q,Y=(0,o.iv)("font-family:",b.addToCartButtonTypeFontFamily?b.addToCartButtonTypeFontFamily:"inherit",";font-weight:",b.addToCartButtonTypeFontWeight?b.addToCartButtonTypeFontWeight:"initial",";font-style:",b.addToCartButtonTypeFontStyle?b.addToCartButtonTypeFontStyle:"initial",";font-size:",b.addToCartButtonTypeFontSize?b.addToCartButtonTypeFontSize:"initial",";letter-spacing:",b.addToCartButtonTypeLetterSpacing?b.addToCartButtonTypeLetterSpacing:"initial",";line-height:",b.addToCartButtonTypeLineHeight?b.addToCartButtonTypeLineHeight:"initial",";text-decoration:",b.addToCartButtonTypeTextDecoration?b.addToCartButtonTypeTextDecoration:"initial",";text-transform:",b.addToCartButtonTypeTextTransform?b.addToCartButtonTypeTextTransform:"initial",";overflow-y:hidden;&:focus,&:hover{text-decoration:none;cursor:",C||O?"not-allowed":"pointer",";color:",C||O?"rgba(255, 255, 255, 1)":"rgba(255, 255, 255, 0.7)",";}&&{background-color:",O?"#cfcfcf":e,";};label:addToCartCSS;");function J(){return(J=(0,w.Z)(k().mark((function t(e){var n,o,p,c,d;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("modal"!==f||!wpshopify.misc.isPro||r){t.next=3;break}return l({type:"TOGGLE_MODAL",payload:!0}),t.abrupt("return");case 3:if(!a||r||i){t.next=5;break}return t.abrupt("return");case 5:if(e.preventDefault(),u||!s){t.next=9;break}return l({type:"SET_MISSING_SELECTIONS",payload:!0}),t.abrupt("return");case 9:if(K){t.next=15;break}return console.error("ShopWP error: handleClick variant undefined "),l({type:"SET_MISSING_SELECTIONS",payload:!0}),l({type:"SET_ALL_SELECTED_OPTIONS",payload:!1}),l({type:"REMOVE_SELECTED_OPTIONS"}),t.abrupt("return");case 15:if(n=U(K,y),o=wp.hooks.applyFilters("product.lineItemOptions",{minQuantity:b.minQuantity,maxQuantity:b.maxQuantity,subscription:q.subscription,attributes:q.attributes,variantId:K.node.id}),!r){t.next=23;break}l({type:"SET_DIRECT_CHECKOUT_PARAMS",payload:{checkoutCache:{lineItems:n,variants:[K.node],lineItemOptions:[{variantId:K.node.id,options:o}]},note:!1,discountCode:!1,customAttributes:!1}}),l({type:"SET_IS_DIRECT_CHECKOUT",payload:!0}),_(!0),t.next=39;break;case 23:if(p=b.resetVariantsAfterAdding,c=b.openCartAfterAdding,d=M(n,[K.node],o),!X||!W(0,X,K.node)){t.next=34;break}return c&&wp.hooks.doAction("do.cartToggle","open"),l({type:"SET_ALL_SELECTED_OPTIONS",payload:!1}),l({type:"REMOVE_SELECTED_OPTIONS"}),l({type:"SET_MISSING_SELECTIONS",payload:!1}),t.abrupt("return");case 34:p&&(l({type:"SET_ALL_SELECTED_OPTIONS",payload:!1}),l({type:"REMOVE_SELECTED_OPTIONS"}),l({type:"SET_ADDED_VARIANT",payload:K.node}),l({type:"SET_SELECTED_VARIANT",payload:!1})),l({type:"SET_MISSING_SELECTIONS",payload:!1}),l({type:"REMOVE_SELECTED_OPTIONS"}),wp.hooks.doAction("do.addToCart",d,b),wp.hooks.doAction("on.afterAddToCart",n,K.node);case 39:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,o.tZ)(React.Fragment,null,(0,o.tZ)("button",{ref:G,type:"button",role:"button",itemProp:"potentialAction",itemScope:!0,itemType:"https://schema.org/BuyAction",className:"wps-btn wps-btn-secondary wps-add-to-cart","data-wps-is-direct-checkout":r?"1":"0",onClick:function(t){return J.apply(this,arguments)},css:[D.ct,Y,";label:AddButton;"],disabled:C||O},C?p:(0,o.tZ)(H,{isDisabled:O,addedToCart:d,buttonText:c,addToCartButtonTextColor:n,afterAddedText:b.afterAddedText,productBuyButtonState:q})),A&&(0,o.tZ)(Z,{status:A.type,isDismissible:!1,extraCSS:$},A.message))}function H(t){var e=t.buttonText,n=t.addedToCart,a=t.addToCartButtonTextColor,i=t.afterAddedText,r=(t.isDisabled,t.productBuyButtonState),l=z(!1),s=(0,x.Z)(l,2),p=s[0],c=s[1],d=(0,B.Th)(B.RE),u=j();F((function(){n&&(c(!0),d(u.current),setTimeout((function(){u.current&&c(!1)}),3e3))}),[n]);var y=(0,o.iv)("display:block;margin:0;padding:0;color:",a||"inherit",";;label:AddButtonTextCSS;");return(0,o.tZ)("span",{css:y,ref:u,"aria-label":"Product Add to Cart Text"},function(){if(p)var t=i;else t=e;return wp.hooks.applyFilters("product.addToCart.text",t,r)}())}var X=wp.element.memo((function(t){var e=t.hasLink,n=t.payload,a=t.linkTarget,i=t.linkTo,r=t.linkWithBuyButton,l=t.addToCartButtonColor,s=t.addToCartButtonTextColor,p=t.isDirectCheckout,c=t.hasManyVariants,d=t.productDispatch,u=t.buttonText,y=t.selectedVariant,S=t.addedToCart,v=(t.isTouched,t.allOptionsSelected),b=t.quantity,f=t.selectedOptions,T=t.payloadSettings;return(0,o.tZ)("div",{className:"wps-component wps-component-products-add-button wps-btn-wrapper","aria-label":"Product Add Button"},(0,o.tZ)(G,{hasLink:e,payload:n,linkTarget:a,linkTo:i,linkWithBuyButton:r,isDirectCheckout:p},(0,o.tZ)(q,{hasLink:e,linkWithBuyButton:r,addToCartButtonColor:l,addToCartButtonTextColor:s,loader:(0,o.tZ)(A,null),isDirectCheckout:p,hasManyVariants:c,productDispatch:d,buttonText:u,addedToCart:S,allOptionsSelected:v,quantity:b,selectedOptions:f,payload:n,payloadSettings:T,linkTo:i})),wpshopify.misc.isPro&&T.showInventoryLevels&&n.availableForSale&&n.totalInventory?(0,o.tZ)(V,{selectedVariant:y,allOptionsSelected:v,payloadSettings:T}):null)})),K=n("ecC/");function $(t,e){switch(e.type){case"SET_SELECTED_OPTION":return(0,P.kK)("selectedOption",e,t);case"SET_IS_OPTION_SELECTED":return(0,P.kK)("isOptionSelected",e,t);case"TOGGLE_DROPDOWN":return(0,P.kK)("isDropdownOpen",e,t);default:throw new Error("Unhandled action type: ".concat(e.type," in ProductOptionReducer"))}}var Y=n("vUFd");function J(t){var e=wp.element.useReducer($,function(t){return{isOptionSelected:!1,option:!!t.option&&t.option,dropdownElement:!!t.dropdownElement&&t.dropdownElement,selectedOption:{},isDropdownOpen:!1,variants:!!t.variants&&t.variants,totalOptions:!!t.totalOptions&&t.totalOptions,payloadSettings:!!t.payloadSettings&&t.payloadSettings}}(t.options)),n=(0,x.Z)(e,2),a=n[0],o=n[1],i=wp.element.useMemo((function(){return[a,o]}),[a]);return React.createElement(Y.m.Provider,(0,K.Z)({value:i},t))}var tt=n("KKeo"),et=n.n(tt),nt=wp.element,at=nt.useContext,ot=nt.useEffect,it=nt.useRef,rt=function(t){var e=t.children,n=(0,s.C)(),a=(0,s.V)(),o=at(Y.m),i=(0,x.Z)(o,2)[1],r=it(!0);return ot((function(){if(n.selectFirstVariant){if(!n.payload.variants.edges.length)return void console.warn("ShopWP warning: Unable to select first variant because no variants exist.");var t=n.payload.variants.edges[0].node;if(!n.payload.availableForSale||!t.availableForSale||!t.selectedOptions)return void console.warn("ShopWP warning: Unable to select first variant because product is not available for sale.");var e=(0,P.$B)(t.selectedOptions[0].name,t.selectedOptions[0].value);a({type:"UPDATE_SELECTED_OPTIONS",payload:e}),i({type:"SET_SELECTED_OPTION",payload:e}),i({type:"SET_IS_OPTION_SELECTED",payload:!0})}if(n.preSelectVariant){var o=(0,P.oQ)(n.preSelectVariant,n.payload);if(o){var r=(0,P.ot)(o.node.selectedOptions);a({type:"SET_ALL_SELECTED_OPTIONS",payload:!0}),a({type:"SET_SELECTED_VARIANT",payload:{payload:n.payload,selectedOptions:r}}),r.forEach((function(t){a({type:"UPDATE_SELECTED_OPTIONS",payload:t}),i({type:"SET_SELECTED_OPTION",payload:t}),i({type:"SET_IS_OPTION_SELECTED",payload:!0})})),wp.hooks.doAction("on.beforeAddToCart",n)}}}),[]),ot((function(){if(!r.current)return et()(n.selectedOptions)?(i({type:"SET_IS_OPTION_SELECTED",payload:!1}),void i({type:"SET_SELECTED_OPTION",payload:{}})):void 0;r.current=!1}),[n.selectedOptions]),e},lt=wp.element.lazy((function(){return Promise.all([n.e("vendors-shopwp-components_node_modules_tippyjs_react_dist_tippy-react_esm_js-shopwp-component-fb0dc9"),n.e("ProductOptionDropdown-public")]).then(n.bind(n,"4RL0"))})),st=wp.element.memo((function(t){var e=t.option,n=t.availableVariants,a=t.selectedOptions,o=t.missingSelections,i=t.variants,r=t.payloadSettings,l=t.totalOptions,s=t.allSelectableOptions,p=(0,wp.element.useRef)();return React.createElement(J,{options:{option:e,variants:i,dropdownElement:p,payloadSettings:r,totalOptions:l}},React.createElement(rt,null,React.createElement(lt,{availableVariants:n,selectedOptions:a,missingSelections:o,payloadSettings:r,allSelectableOptions:s})))})),pt=function(t){var e=t.options,n=t.availableVariants,a=t.selectedOptions,o=t.missingSelections,i=t.variants,r=t.payloadSettings,l=t.allSelectableOptions;return React.createElement("div",{className:"wps-component wps-component-products-options","aria-label":"Product Options"},e&&e.map((function(t){return React.createElement(st,{key:t.name,option:t,availableVariants:n,selectedOptions:a,missingSelections:o,variants:i,payloadSettings:r,totalOptions:e.length,allSelectableOptions:l})})))},ct={name:"kqaj3j-selectStyles",styles:"margin-top:6px;color:red;label:selectStyles;"},dt=function(t){var e=t.productOptionState,n=ct;return(0,o.tZ)("p",{css:n},wp.hooks.applyFilters("product.missingSelectionText",wp.i18n.__("Please select a ","shopwp")+String(e.option.name).toLowerCase(),e))},ut=n("8wr9"),yt=n("zUcG");function St(t){var e=t.defaultStyles,n=t.onSelection,a=t.isSelected,i=t.isAvailableToSelect,r=t.isAvailableInShopify,l=t.variantValue,s=t.variantObject;return(0,o.tZ)("button",{css:e,type:"button",onMouseDown:n,"data-is-variant-selected":a,"data-is-available":i,"data-is-available-in-shopify":r},wp.hooks.applyFilters("product.variantValue",l),s&&(0,o.tZ)(bt,{variantObject:s}))}var vt={name:"pvjize-variantObjectCSS",styles:"&&{font-size:15px;margin-top:5px;margin-bottom:0;display:inline;margin-left:10px;};label:variantObjectCSS;"};function bt(t){var e=t.variantObject,n=vt;return(0,o.tZ)("p",{css:n,className:"wps-variant-button-price"},(0,o.tZ)(yt.Z,{price:e[0].node.priceV2.amount}))}var ft=function(t){var e=t.optionObj,n=t.onSelection,a=t.selectedOptions,i=t.isAvailableToSelect,r=t.variants,l=t.totalOptions,s=t.payloadSettings,p=t.isAvailableInShopify,c=(0,P.$B)(e.name,e.value),d=(0,P.pV)(a,c),u=d?"#415aff":"black",y=d?"white":"black",S=d?"#415aff":"transparent",v=i?1:.4;if(s.showPriceUnderVariantButton&&1===l)var b=(0,P.$X)(e,r);else b=!1;var f=s.colorSwatchNames,T="margin: 0 10px 10px 0;\n    outline: none;\n    border: 1px solid ".concat(u,";\n    font-size: 16px;\n    padding: 10px;\n    border-radius: 5px;\n    opacity: ").concat(v,";\n    color: ").concat(y,";\n    background-color: ").concat(S,";\n    transition: all ease 0.2s;\n\ttext-decoration: ").concat(p?"none":"line-through",";\n\n    &:hover,\n    &:focus {\n      cursor: ").concat(i?d?"auto":"pointer":"not-allowed",";\n      background-color: ").concat(i?d?S:"#e9e9e9":S,";\n      text-decoration: ").concat(p?"none":"line-through",";\n    }"),m=(0,o.iv)(wp.hooks.applyFilters("product.variantStyles",function(t,e){var n=f.map((function(t){return String(t).toLowerCase()}));if(n&&!n.includes(String(t.name).toLowerCase()))return e;var a=wp.hooks.applyFilters("product.colorSwatchValue",t.value);if("white"===a||"White"===a)var o=d?"3px solid #333":"1px solid #333";else o=d?"1px solid "+a:"none";return"\n         margin: 0 10px 10px 0;\n         outline: none;\n         padding: 10px;\n         background-color: ".concat(a,";\n         text-indent: 150%;\n         white-space: nowrap;\n         overflow: hidden;\n         width: 40px;\n         height: 40px;\n         font-size: 0;\n         opacity: ").concat(i?1:.1,";\n         border-radius: 50%;\n         border: ").concat(o,";\n         box-shadow: ").concat(d?"inset 0 0 0px 4px white":"none",";\n         transition: all ease 0.15s;\n         line-height: 1;\n\n         &:hover {\n            transform: scale(1.2);\n            cursor: ").concat(d?"auto":"pointer",";\n            opacity: 1 !important;\n         }      \n      ")}(e,T),e,d,i),";;label:ProductVariantButtonValueButtonCSS;");return(0,o.tZ)(St,{defaultStyles:m,onSelection:n,isSelected:d,isAvailableToSelect:i,isAvailableInShopify:p,variantValue:e.value,variantObject:b})},Tt=wp.element.memo((function(t){var e=t.option,n=t.selectedOptions,a=t.availableVariants,o=t.variants,i=t.totalOptions,r=t.payloadSettings,l=t.allSelectableOptions;return e.values.map((function(t){return React.createElement(ut.Z,{selectedOptions:n,availableVariants:a,optionObj:t,key:t.name+t.value,variants:o,totalOptions:i,payloadSettings:r,variantId:t.variantId,allSelectableOptions:l},React.createElement(ft,null))}))})),mt={name:"1rx0q05-groupStyles",styles:"display:flex;flex-direction:column;margin-bottom:1em;label:groupStyles;"},Ot={name:"18jk3bw-labelStyles",styles:"margin-bottom:5px;font-weight:bold;font-size:15px;label:labelStyles;"},Et=function(t){var e=t.option,n=t.missingSelections,a=t.selectedOptions,i=t.availableVariants,r=t.payloadSettings,l=t.allSelectableOptions,s=wp.element,p=s.useRef,c=(0,s.useContext)(Y.m),d=(0,x.Z)(c,1)[0],u=p(),y=Ot,S=mt;return(0,o.tZ)("div",{className:"wpshopify-variant-buttons-group",css:S},(0,o.tZ)("label",{css:y},wp.hooks.applyFilters("product.optionName",e.name,d)),(0,o.tZ)("div",{className:"wpshopify-variant-buttons",ref:u},(0,o.tZ)(Tt,{option:e,availableVariants:i,selectedOptions:a,variants:d.variants,totalOptions:d.totalOptions,payloadSettings:r,allSelectableOptions:l})),n&&!d.isOptionSelected&&(0,o.tZ)(dt,{productOptionState:d}))},ht=function(t){var e=t.option,n=t.missingSelections,a=t.availableVariants,o=t.selectedOptions,i=t.variants,r=t.totalOptions,l=t.payloadSettings,s=t.allSelectableOptions;return e?React.createElement(J,{options:{option:e,variants:i,totalOptions:r,payloadSettings:l}},React.createElement(rt,null,React.createElement(Et,{option:e,missingSelections:n,availableVariants:a,selectedOptions:o,payloadSettings:l,allSelectableOptions:s}))):""},gt={name:"1pfmvw3-styles",styles:"margin:1em 0;label:styles;"},Ct=wp.element.memo((function(t){var e=t.options,n=t.missingSelections,a=t.selectedOptions,i=t.availableVariants,r=t.variants,l=t.payloadSettings,s=t.allSelectableOptions,p=gt;return e?(0,o.tZ)("div",{className:"wpshopify-products-variant-buttons",css:p},e.map((function(t){return t&&(0,o.tZ)(ht,{key:t.name,option:t,missingSelections:n,selectedOptions:a,availableVariants:i,variants:r,totalOptions:e.length,payloadSettings:l,allSelectableOptions:s})}))):null})),wt=wp.element.memo((function(t){var e=t.productDispatch,n=t.variantStyle,a=t.clearSelectionsText,i=(0,o.iv)("position:absolute;right:0;font-size:14px;text-decoration:underline;top:","dropdown"===n?"-50px":"-5px",";padding:5px 0;&:hover{cursor:pointer;};label:ClearSelectionsCSS;");return(0,o.tZ)("p",{css:[i,D.P0,";label:ClearSelections;"],onClick:function(){e({type:"SET_MISSING_SELECTIONS",payload:!1}),e({type:"SET_ALL_SELECTED_OPTIONS",payload:!1}),e({type:"SET_SELECTED_VARIANT",payload:!1}),e({type:"SET_SELECTED_SUBSCRIPTION_INFO",payload:!1}),e({type:"REMOVE_SELECTED_OPTIONS"})}},a)})),xt={name:"5ow4qb-ProductOptionsCSS",styles:"position:relative;label:ProductOptionsCSS;"},_t=function(t){var e=t.variantStyle,n=t.availableOptions,a=t.missingSelections,i=t.selectedOptions,r=t.availableVariants,l=t.variants,s=t.productDispatch,p=t.payloadSettings,c=t.allSelectableOptions,d=xt;return(0,o.tZ)("div",{className:"wps-product-options",css:d,"aria-label":"Product variant ".concat(e||"dropdown")},!et()(i)&&(0,o.tZ)(wt,{productDispatch:s,variantStyle:e,clearSelectionsText:p.clearSelectionsText}),"dropdown"===e?(0,o.tZ)(pt,{options:n,missingSelections:a,availableVariants:r,selectedOptions:i,variants:l,payloadSettings:p,allSelectableOptions:c}):"buttons"===e&&wpshopify.misc.isPro?(0,o.tZ)(Ct,{options:n,missingSelections:a,availableVariants:r,selectedOptions:i,variants:l,payloadSettings:p,allSelectableOptions:c}):(0,o.tZ)(pt,{options:n,missingSelections:a,availableVariants:r,selectedOptions:i,variants:l,payloadSettings:p,allSelectableOptions:c}))},kt=wp.element.lazy((function(){return n.e("ProductQuantity-public").then(n.bind(n,"UG48"))})),Bt=wp.element.lazy((function(){return n.e("SubscriptionsBuyButton-public").then(n.bind(n,"2uYs"))})),Pt=function(t){var e=t.payloadSettings,n=t.payload,a=t.productState,o=t.productDispatch,i=(e.directCheckout||wpshopify.settings.general.directCheckout)&&wpshopify.misc.isPro;function r(){return!("none"===e.linkTo||e.isSingular&&e.postId||i||"shopify"!==e.linkTo&&"wordpress"!==e.linkTo&&"modal"!==e.linkTo||e.linkWithBuyButton)}var l=(0,y.L2)(e,i,e.linkWithBuyButton),s=[];n.variants.edges.forEach((function(t){s.push({availableForSale:t.node.availableForSale,id:t.node.id,selectedOptions:t.node.selectedOptions})}));var p=function(t,e){if(!t.edges.length)return!1;if(e)var n=t.edges;else n=function(t){return E()(t,(function(t){return t.node.availableForSale}))}(t.edges);var a,o=function(t){return v()(g()(t,(function(t){return t.node.selectedOptions.id=t.node.id,t.node.selectedOptions.map((function(t){return{name:t.name,value:t.value}}))})),"name")}(n);return a=o,f()(a,(function(t,e){return{name:e,values:C(t)}}))}(n.variants,e.showOutOfStockVariants);return React.createElement(React.Fragment,null,!1===e.hideQuantity&&!r()&&React.createElement(kt,{excludes:e.excludes,addedToCart:a.addedToCart,minQuantity:e.minQuantity,maxQuantity:e.maxQuantity,showLabel:e.showQuantityLabel,labelText:e.quantityLabelText,quantityStep:e.quantityStep,payload:n}),a.hasManyVariants&&!r()&&React.createElement(_t,{allSelectableOptions:s,missingSelections:a.missingSelections,variantStyle:e.variantStyle,selectedOptions:a.selectedOptions,availableOptions:p,variants:n.variants,productDispatch:o,payloadSettings:e}),wpshopify.misc.isPro&&wpshopify.misc.hasRecharge&&e.subscriptions&&"none"===e.linkTo&&React.createElement(Bt,{payload:a.payload,payloadSettings:e}),React.createElement(X,{payloadSettings:e,addedToCart:a.addedToCart,isTouched:a.isTouched,hasLink:a.hasLink,allOptionsSelected:a.allOptionsSelected,payload:n,linkTarget:e.linkTarget,linkTo:e.linkTo,linkWithBuyButton:e.linkWithBuyButton,addToCartButtonColor:e.addToCartButtonColor,addToCartButtonTextColor:e.addToCartButtonTextColor,isDirectCheckout:i,hasManyVariants:a.hasManyVariants,productDispatch:o,buttonText:l,selectedVariant:a.selectedVariant,quantity:a.quantity,selectedOptions:a.selectedOptions}))},Dt=n("raWh"),It=n("AE00"),Lt=n.n(It);function Zt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function Nt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Zt(Object(n),!0).forEach((function(e){(0,Dt.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var At=function(t,e){if("SET_SELECTED_SUBSCRIPTION"===e.type)return Nt(Nt({},t),{},{subscription:Lt()(t.subscription,{$set:e.payload})});throw new Error("Unhandled action type: ".concat(e.type," in ProductBuyButtonReducer"))},Vt=n("xDxd"),Rt=function(t){var e=wp.element.useReducer(At,function(t){return{subscription:!1,attributes:!1,payloadSettings:t.payloadSettings,payload:t.payload}}(t)),n=(0,x.Z)(e,2),a=n[0],o=n[1];return React.createElement(Vt.F.Provider,{value:a},React.createElement(Vt.z.Provider,{value:o},t.children))},jt=wp.element.lazy((function(){return Promise.resolve().then(n.bind(n,"20Ni"))})),Ft={name:"1u6ks4d-unavailableNoticeCSS",styles:"margin-top:15px;label:unavailableNoticeCSS;"},zt=function(){var t=wp.element,e=t.useEffect,n=t.Suspense,a=(0,s.C)(),i=(0,s.V)(),p=(0,o.iv)("display:flex;flex-direction:column;margin-bottom:",a.payloadSettings.isSingleComponent?"0px":"15px",";;label:buyButtonWrapperCSS;"),c=Ft;return e((function(){var t,e;t=a.selectedOptions,e=a.payload,r()(t)===e.options.length?(i({type:"SET_ALL_SELECTED_OPTIONS",payload:!0}),i({type:"SET_SELECTED_VARIANT",payload:{payload:a.payload,selectedOptions:a.selectedOptions}}),wp.hooks.doAction("on.beforeAddToCart",a)):i({type:"SET_ALL_SELECTED_OPTIONS",payload:!1})}),[a.selectedOptions]),(0,l.vI)((0,o.tZ)(Rt,{payloadSettings:a.payloadSettings,payload:a.payload},(0,o.tZ)("div",{css:p,className:"wps-component-products-buy-button","aria-label":"Product Buy Button"},(0,o.tZ)(P.ce,{name:"before.productBuyButton",args:[a]}),(0,o.tZ)(n,{fallback:(0,o.tZ)(u,null)},a.payload.availableForSale?(0,o.tZ)(Pt,{payload:a.payload,productState:a,productDispatch:i,payloadSettings:a.payloadSettings}):(0,o.tZ)(P.ce,{name:"product.unavailableHtml",args:[a]},(0,o.tZ)(jt,{status:"warning",isDismissible:!1,extraCSS:c},a.payloadSettings.noticeUnavailableText))),(0,o.tZ)(P.ce,{name:"after.productBuyButton",args:[a]}))),(0,P.tu)(a.payloadSettings.dropzoneProductBuyButton))}},vUFd:function(t,e,n){n.d(e,{m:function(){return a}});var a=wp.element.createContext()},"8wr9":function(t,e,n){var a=n("XUG9"),o=n("raWh"),i=n("vUFd"),r=n("MwdL"),l=n("E5I5"),s=n("/WdH"),p=n.n(s);function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){(0,o.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}e.Z=function(t){var e=t.optionObj,n=t.selectedOptions,o=t.variants,s=void 0!==o&&o,c=t.totalOptions,u=void 0!==c&&c,y=t.payloadSettings,S=t.children,v=t.allSelectableOptions,b=(0,wp.element.useContext)(i.m),f=(0,a.Z)(b,2),T=f[0],m=f[1],O=(0,r.V)(),E=(0,l.$B)(e.name,e.value),h=function(t,e){var n=function(t,e){return t.filter((function(t){return!!p()(t.selectedOptions,e)&&t}))}(t,e);return!!n.filter((function(t){return t.availableForSale})).length}(v,e),g=function(t,e,n,a,o){if(e.payloadSettings.showOutOfStockVariants)return!0;if(e.isOptionSelected)return!!o;var i=d(d({},n),t);return!!(0,l.Zj)(i,a).length}(n,T,E,s,h);return wp.element.cloneElement(S,{onSelection:function(){O({type:"UPDATE_SELECTED_OPTIONS",payload:E}),m({type:"SET_SELECTED_OPTION",payload:E}),m({type:"TOGGLE_DROPDOWN",payload:!1}),m({type:"SET_IS_OPTION_SELECTED",payload:!0}),wp.hooks.doAction("on.variantsSelection",E,T)},optionObj:e,isAvailableToSelect:g,selectedOptions:n,variants:s,totalOptions:u,payloadSettings:y,isAvailableInShopify:h})}}}]);